# TransferService - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
- **TransferService.php** - –ø–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å 15+ –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–ø—Ä–æ—Å—Ç–æ–π –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö
  - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### DTO –∫–ª–∞—Å—Å—ã (Data Transfer Objects)
- **CreateTransferRequest.php** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
- **CreateTransferResponse.php** - –æ—Ç–≤–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ 
- **TransferDetailsRequest.php** - –∑–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–µ–≤–æ–¥–µ
- **TransferDetailsResponse.php** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å 15+ –ø–æ–ª—è–º–∏
- **TransferHistoryRequest.php** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **TransferHistoryResponse.php** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **TransferController.php** - 10+ –º–µ—Ç–æ–¥–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- **routes/api.php** - –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä API –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **README.md** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

## üî• –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

### –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```php
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π
$transfer = Pay2House::transfers()->createSimpleTransfer(
    'P2U123456789', 'P2U987654321', 50.00, '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π'
);
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```php
// –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
$request = new CreateTransferRequest(...);
if (!$request->isValid()) {
    $errors = $request->validate(); // –ú–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫
}
```

### –£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```php
// –¶–µ–ø–æ—á–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
$request = TransferHistoryRequest::forLastMonth()
    ->onlyConfirmed()
    ->onlyOutgoing()
    ->filterByDateRange('01.12.2024', '31.12.2024');
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
```php
// –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
$stats = $history->getStatistics();
/*
[
    'total_count' => 150,
    'confirmed_count' => 145,
    'total_amount' => 15000.50,
    'average_amount' => 600.02
]
*/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
```php
// –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
$details = Pay2House::transfers()->getTransferByNumber('TN123');

if ($details->isConfirmed()) {
    echo "–ü–µ—Ä–µ–≤–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω!";
} elseif ($details->isProcessing()) {
    echo "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ...";
}
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã TransferService:

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `createSimpleTransfer()` | –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ |
| `createTransfer()` | –°–æ–∑–¥–∞–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| `getTransferByNumber()` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –Ω–æ–º–µ—Ä—É |
| `isTransferConfirmed()` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ |
| `getTransferHistory()` | –ò—Å—Ç–æ—Ä–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ |
| `getRecentTransfers()` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã |
| `getOutgoingTransfers()` | –¢–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥—è—â–∏–µ |
| `getIncomingTransfers()` | –¢–æ–ª—å–∫–æ –≤—Ö–æ–¥—è—â–∏–µ |
| `getTransfersByDateRange()` | –ó–∞ –ø–µ—Ä–∏–æ–¥ |
| `validateTransfer()` | –í–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è |
| `getTransferStats()` | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |

## üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

- ‚úÖ –§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–æ–≤ —Å—á–µ—Ç–æ–≤ (P2U + —Ü–∏—Ñ—Ä—ã)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å ‚â† –ø–æ–ª—É—á–∞—Ç–µ–ª—å
- ‚úÖ –î–ª–∏–Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –§–æ—Ä–º–∞—Ç –¥–∞—Ç –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- ‚úÖ –î–æ–ø—É—Å—Ç–∏–º—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏ —Ç–∏–ø—ã

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –ø–æ –¥–∞—Ç–∞–º, —Å—Ç–∞—Ç—É—Å–∞–º, —Ç–∏–ø–∞–º
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ —Å—É–º–º–µ, –¥–∞—Ç–µ, —Å—Ç–∞—Ç—É—Å—É
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø–æ –ª—é–±—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Å—É–º–º—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Laravel:

- **–§–∞—Å–∞–¥** - `Pay2House::transfers()`
- **DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** - Laravel validation rules
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

TransferService –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ! üöÄ